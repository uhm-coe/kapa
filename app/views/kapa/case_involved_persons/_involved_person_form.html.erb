<% content_for(:head) do %>
  <script type="text/javascript">
    jQuery(document).ready(function($) {
      <% if @case_involved_person.nil? || @case_involved_person.internal? %>
        $("#involved-person-name").hide();
      <% elsif @author.external? %>
        $("#involved-person").hide();
      <% end %>

      $("#case_involved_person_type").change(function() {
        if ($(this).val() == 'internal') {
          $("#involved-person").show(300);
          $("#involved-person-name").hide(300);
        }
        else if ($(this).val() == 'external') {
          $("#involved-person").hide(300);
          $("#involved-person-name").show(300);
        }
      });
    });
  </script>
<% end %>

<%= bootstrap_fields_for :case_involved_person do |f| %>
  <%= f.select :type, [["Student", "internal"], ["External Person", "external"]] %>
  <div id="involved-person">
    <%= f.person_select :person_id, {:label => "Student", :depts => @current_user.depts, :include_blank => "Select a person..."} %>
  </div>
  <div class="row" id="involved-person-name">
    <div class="col-sm-5">
      <%= f.text_field :last_name, {:label => "Last Name"} %>
    </div>
    <div class="col-sm-5">
      <%= f.text_field :first_name, {:label => "First Name"} %>
    </div>
    <div class="col-sm-2">
      <%= f.text_field :middle_initial, {:label => "MI"} %>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6">
      <%= f.text_field :email, {:label => "E-mail"} %>
    </div>
    <div class="col-sm-6">
      <%= f.text_field :phone, {:label => "Phone"} %>
    </div>
  </div>

<% end %>